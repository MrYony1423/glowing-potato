<!DOCTYPE html>
<html lang="en"><head><meta charset="UTFâ€‘8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CapCut-Inspired Pro Editor</title>
<style>
  body{margin:0;background:#18181b;color:#fff;font-family:sans-serif}
  header{background:#1f1f23;padding:14px;font-size:22px;text-align:center}
  #container{display:flex;flex-direction:column;height:100vh}
  #main{flex:1;display:flex;overflow:hidden}
  #sidebar{width:260px;background:#25252e;padding:20px;display:flex;flex-direction:column}
  #sidebar input, button, select{margin-bottom:12px;padding:10px;border:none;border-radius:6px;font-size:15px;cursor:pointer}
  button, select{background:linear-gradient(90deg,#00c6ff,#0072ff);color:#fff}
  button:hover, select:hover{opacity:0.9}
  #viewer{flex:1;background:#1f1f29;position:relative}
  video,#canvas{max-width:100%;max-height:100%;border-radius:8px}
  #overlay{position:absolute;pointer-events:none}
  #timeline{height:130px;background:#1f1f29;padding:8px;border-top:2px solid #333;display:flex;align-items:center;overflow-x:auto}
  .track{min-width:100px;height:60px;background:#0072ff;margin-right:8px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:13px}
</style>
</head><body>
<header>ğŸ¬ CapCut Pro (×“××•×™ ××§×¦×•×¢×™)</header>
<div id="container">
  <div id="main">
    <div id="sidebar">
      <input type="file" id="fileInput" accept="video/*,image/*"/>
      <select id="musicSelect">
        <option value="">â€“ ×œ×œ× ××•×–×™×§×” â€“</option>
        <option value="https://cdn.pixabay.com/download/audio/2022/03/15/audio_45eec7eb7f.mp3">Happy Upbeat</option>
        <option value="https://cdn.pixabay.com/download/audio/2021/12/21/audio_99e8c1ec5f.mp3">Calm Peace</option>
        <option value="https://cdn.pixabay.com/download/audio/2022/06/10/audio_c7e4bf713f.mp3">Summer Fun</option>
      </select>
      <input type="text" id="textInput" placeholder="×›×ª×•×‘ ×˜×§×¡×˜ ×œ×”×•×¡×¤×”..."/>
      <button id="addText">×”×•×¡×¤×ª ×˜×§×¡×˜</button>
      <label>××•×¨×š ×”×ª×—×œ×” (×©×´× ):</label><input type="number" id="trimStart" min="0" value="0"/>
      <label>××•×¨×š ×¡×™×•× (×©×´× ):</label><input type="number" id="trimEnd" min="0" value="0"/>
      <button id="trimBtn">âœ‚ï¸ ×—×ª×•×š ×•×™×“××•</button>
    </div>
    <div id="viewer">
      <video id="video" controls style="display:none"></video>
      <canvas id="canvas" style="display:none"></canvas>
      <div id="overlay"></div>
    </div>
  </div>
  <div id="timeline">
    <div class="track">×•×™×“××•</div>
    <div class="track">××•×“×™×•</div>
    <div class="track">×˜×§×¡×˜</div>
  </div>
</div>
<script>
  const fileInput=1?document.getElementById('fileInput'):null;
  const video=document.getElementById('video'),canvas=document.getElementById('canvas'),ctx=canvas.getContext('2d');
  const overlay=document.getElementById('overlay'),musicSelect=document.getElementById('musicSelect');
  const textInput=document.getElementById('textInput'),addText=document.getElementById('addText');
  const trimStart=document.getElementById('trimStart'),trimEnd=document.getElementById('trimEnd'),trimBtn=document.getElementById('trimBtn');
  let audio, texts=[];

  fileInput.addEventListener('change',e=>{
    const f=e.target.files[0];
    if(!f)return;
    const url=URL.createObjectURL(f);
    if(f.type.startsWith('image/')){
      video.style.display='none';canvas.style.display='block';
      const img=new Image();img.onload=()=>{
        canvas.width=img.width;canvas.height=img.height;ctx.drawImage(img,0,0);
      };img.src=url;overlay.style.display='none';
      stopAudio();
    } else {
      canvas.style.display='none';overlay.style.display='block';video.style.display='block';
      video.src=url;video.currentTime=0;texts=[];
      overlay.innerHTML='';stopAudio();
    }
  });

  musicSelect.addEventListener('change',()=>{
    stopAudio();
    if(musicSelect.value){
      audio=new Audio(musicSelect.value);
      audio.loop=true;audio.volume=0.7;
      if(!video.paused)audio.play();
    }
  });

  video.addEventListener('play',()=>audio&&audio.play());
  video.addEventListener('pause',()=>audio&&audio.pause());
  video.addEventListener('seeking',()=>audio&&(audio.currentTime=video.currentTime));
  video.addEventListener('timeupdate',()=>audio&&Math.abs(audio.currentTime-video.currentTime)>0.3&&(audio.currentTime=video.currentTime));

  addText.addEventListener('click',()=>{if(textInput.value.trim()){
    texts.push({txt:textInput.value,color:'#fff',size:36,x:50,y:50});textInput.value='';renderOverlay();
  }});
  function renderOverlay(){
    overlay.innerHTML='';texts.forEach(t=>{
      const sp = document.createElement('div');
      sp.textContent=t.txt;
      sp.style.position='absolute';sp.style.color=t.color;
      sp.style.fontSize=t.size+'px';sp.style.left=t.x+'px';sp.style.top=t.y+'px';
      sp.style.textShadow='2px 2px 6px black';overlay.appendChild(sp);
    });
  }

  trimBtn.addEventListener('click',()=>{
    const s=parseFloat(trimStart.value),e=parseFloat(trimEnd.value);
    if(!isNaN(s))video.currentTime=s;
    if(!isNaN(e))video.addEventListener('timeupdate',function tmp(){if(video.currentTime>=e){video.pause();video.removeEventListener('timeupdate',tmp);}});
  });

  function stopAudio(){audio&&(audio.pause(),audio=null);}
</script>
</body></html>
